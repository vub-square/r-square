<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Wilfried Cools">
<meta name="dcterms.date" content="2023-12-08">
<meta name="description" content="ggplot2">

<title>the r-square - Visualization with R’s tidyverse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">the r-square</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Intro</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./manipulation.html" rel="" target="">
 <span class="menu-text">Manipulation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./visualization.html" rel="" target="" aria-current="page">
 <span class="menu-text">Visualization</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-context" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Context</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-context">    
        <li>
    <a class="dropdown-item" href="./rPrimer.html" rel="" target="">
 <span class="dropdown-text">R primer</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rProgramming.html" rel="" target="">
 <span class="dropdown-text">Programming</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./representation.html" rel="" target="">
 <span class="dropdown-text">Representation</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://square.research.vub.be/"><img src=".\_xtra/_hdr_logo.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#rs-tidyverse-package-ggplot2" id="toc-rs-tidyverse-package-ggplot2" class="nav-link active" data-scroll-target="#rs-tidyverse-package-ggplot2">R’s tidyverse package: ggplot2</a></li>
  <li><a href="#a-quick-illustration-with-ggplot2" id="toc-a-quick-illustration-with-ggplot2" class="nav-link" data-scroll-target="#a-quick-illustration-with-ggplot2">A quick illustration with ggplot2</a>
  <ul>
  <li><a href="#toy-dataset" id="toc-toy-dataset" class="nav-link" data-scroll-target="#toy-dataset">toy dataset</a></li>
  <li><a href="#toy-illustration" id="toc-toy-illustration" class="nav-link" data-scroll-target="#toy-illustration">toy illustration</a></li>
  </ul></li>
  <li><a href="#layered-building-blocks" id="toc-layered-building-blocks" class="nav-link" data-scroll-target="#layered-building-blocks">Layered building blocks</a></li>
  <li><a href="#dimensionality" id="toc-dimensionality" class="nav-link" data-scroll-target="#dimensionality">Dimensionality</a></li>
  <li><a href="#visualization-essentials" id="toc-visualization-essentials" class="nav-link" data-scroll-target="#visualization-essentials">Visualization essentials</a>
  <ul>
  <li><a href="#step-by-step-example" id="toc-step-by-step-example" class="nav-link" data-scroll-target="#step-by-step-example">step by step example</a></li>
  <li><a href="#recap-ggplot" id="toc-recap-ggplot" class="nav-link" data-scroll-target="#recap-ggplot">recap ggplot( )</a></li>
  <li><a href="#recap-aes" id="toc-recap-aes" class="nav-link" data-scroll-target="#recap-aes">recap aes( )</a></li>
  <li><a href="#recap-geom_" id="toc-recap-geom_" class="nav-link" data-scroll-target="#recap-geom_">recap geom_*( )</a></li>
  </ul></li>
  <li><a href="#visualization-extras" id="toc-visualization-extras" class="nav-link" data-scroll-target="#visualization-extras">Visualization extras</a>
  <ul>
  <li><a href="#geom-and-stat-layers" id="toc-geom-and-stat-layers" class="nav-link" data-scroll-target="#geom-and-stat-layers">geom and stat layers</a></li>
  <li><a href="#scale__" id="toc-scale__" class="nav-link" data-scroll-target="#scale__">scale_*_*( )</a></li>
  <li><a href="#facet_" id="toc-facet_" class="nav-link" data-scroll-target="#facet_">facet_*( )</a></li>
  <li><a href="#theme" id="toc-theme" class="nav-link" data-scroll-target="#theme">theme( )</a></li>
  <li><a href="#coord_" id="toc-coord_" class="nav-link" data-scroll-target="#coord_">coord_*( )</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">summary</a></li>
  </ul></li>
  <li><a href="#examples-to-go-into-detail" id="toc-examples-to-go-into-detail" class="nav-link" data-scroll-target="#examples-to-go-into-detail">Examples to go into detail</a>
  <ul>
  <li><a href="#one-variable" id="toc-one-variable" class="nav-link" data-scroll-target="#one-variable">one-variable</a>
  <ul class="collapse">
  <li><a href="#exercises-on-one-variable-visualizations" id="toc-exercises-on-one-variable-visualizations" class="nav-link" data-scroll-target="#exercises-on-one-variable-visualizations">exercises on one variable visualizations</a></li>
  </ul></li>
  <li><a href="#two-variables" id="toc-two-variables" class="nav-link" data-scroll-target="#two-variables">two-variables</a>
  <ul class="collapse">
  <li><a href="#exercises-on-two-variable-visualizations" id="toc-exercises-on-two-variable-visualizations" class="nav-link" data-scroll-target="#exercises-on-two-variable-visualizations">exercises on two variable visualizations</a></li>
  </ul></li>
  <li><a href="#intervals" id="toc-intervals" class="nav-link" data-scroll-target="#intervals">intervals</a></li>
  <li><a href="#third-variable-implied" id="toc-third-variable-implied" class="nav-link" data-scroll-target="#third-variable-implied">third variable implied</a></li>
  <li><a href="#three-variables" id="toc-three-variables" class="nav-link" data-scroll-target="#three-variables">three variables</a></li>
  <li><a href="#primitives" id="toc-primitives" class="nav-link" data-scroll-target="#primitives">primitives</a>
  <ul class="collapse">
  <li><a href="#exercises-on-primitives" id="toc-exercises-on-primitives" class="nav-link" data-scroll-target="#exercises-on-primitives">exercises on primitives</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#beyond-ggplot2--gg--packages" id="toc-beyond-ggplot2--gg--packages" class="nav-link" data-scroll-target="#beyond-ggplot2--gg--packages">Beyond ggplot2: -gg- packages</a></li>
  <li><a href="#last-remarks" id="toc-last-remarks" class="nav-link" data-scroll-target="#last-remarks">Last remarks</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Visualization with R’s tidyverse</h1>
</div>

<div>
  <div class="description">
    ggplot2
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Wilfried Cools </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 8, 2023</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">SQUARE consultants</div>
    square.research.vub.be
  </div>
</div>

</header>

<!--
knitr::purl('visualization.qmd')
-->
<p>Compiled on R 4.3.1</p>
<div class="callout callout-style-default callout-important callout-titled" title="What-Why-Who">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What-Why-Who
</div>
</div>
<div class="callout-body-container callout-body">
<p>This site aims to introduce researchers to visualization in R with the <code>ggplot2</code> package of the <code>tidyverse</code> ecosystem.</p>
<p>Our target audience is primarily the research community at VUB / UZ Brussel, those who have some basic experience in R and want to know more.</p>
<p>We invite you to help improve this document by sending us feedback: wilfried.cools@vub.be</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Key Message">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key Message
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Data visualization can focus on data and/or its summarizing statistics
<ul>
<li>to convince yourself, understand data and statistical results</li>
<li>to convince others, show results to support inference</li>
</ul></li>
<li>Data visualization is inherent to data analysis
<ul>
<li>more than simply communicating the results</li>
<li>no -fit’s all data visualization-</li>
<li>flexible use of data visualization
<ul>
<li>supports more informative and complete visualizations</li>
<li>elicits better data exploration and modeling</li>
</ul></li>
</ul></li>
<li>Data visualization is best done with coding
<ul>
<li>maintain structure and transparency, to support reproducibility</li>
</ul></li>
<li>Data visualization is easier and more intuitive with tidy data
<ul>
<li>tidy data: meaning appropriately mapped into structure
<ul>
<li>each row an observation as research unit,</li>
<li>each column a variable as property,</li>
<li>each cell a particular value, linking row to column</li>
<li>note: data can be split into multiple tables (relational data).</li>
</ul></li>
<li>aim for tidy data registration (avoid tedious manipulations)</li>
</ul></li>
<li>Workflow (Hadley Wickham):</li>
</ul>
<p><img src="_img/tidyverseloop.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
<section id="rs-tidyverse-package-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="rs-tidyverse-package-ggplot2">R’s tidyverse package: ggplot2</h2>
<!-- 4:00 -->
<ul>
<li><p>Current focus on <code>ggplot2</code> the visualization package in the <code>tidyverse</code> eco-system (Hadley Wickham etal.)</p></li>
<li><p>Different visualization packages exist in R.</p>
<ul>
<li>base R</li>
<li>grid</li>
<li>trellis/lattice graphics</li>
<li><code>ggplot2</code> (tidyverse) &amp; <code>ggvis</code></li>
</ul></li>
<li><p><code>ggplot2</code> the current default</p>
<ul>
<li>build on idea of Grammar of Graphics (Leland Wilkinson)
<ul>
<li>largely consistent</li>
<li>well appreciated defaults</li>
<li>easy and intuitive to build (if you get it)</li>
<li>without loosing much flexibility</li>
</ul></li>
<li>explicitly links to tidy data</li>
<li>note: requires extensions for 3D plotting and interactive graphics</li>
<li>note: does not allow for multiple Y-axes (combination of axes)</li>
</ul></li>
<li><p><code>ggplot2</code> part of the <code>tidyverse</code> ecosystem (Hadley Wickham etal.), includes:</p>
<ul>
<li><code>dplyr</code> for manipulating data frames [check Data Manipulation]</li>
<li><code>tidyr</code> for tidying data [check Data Representation]</li>
<li><code>stringr</code> for dealing with texts</li>
<li><code>forcats</code> for dealing with factors</li>
<li>…</li>
</ul></li>
<li><p>Convenient cheat sheets at https://rstudio.com/resources/cheatsheets/.</p></li>
</ul>
</section>
<section id="a-quick-illustration-with-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="a-quick-illustration-with-ggplot2">A quick illustration with ggplot2</h2>
<section id="toy-dataset" class="level4">
<h4 class="anchored" data-anchor-id="toy-dataset">toy dataset</h4>
<ul>
<li>The infamous <code>iris</code> data are used
<ul>
<li>observe it’s structure with <code>str( )</code> and first 6 observations <code>head( )</code> function.</li>
<li>note: available data with <code>data( )</code></li>
</ul></li>
</ul>
<div class="columns small">
<div class="column" style="width:45%;">
<ul>
<li>Have a <code>tidyverse</code> look at the data with <code>glimpse( )</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 150
Columns: 5
$ Sepal.Length &lt;dbl&gt; 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9, 5.4, 4.…
$ Sepal.Width  &lt;dbl&gt; 3.5, 3.0, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1, 3.7, 3.…
$ Petal.Length &lt;dbl&gt; 1.4, 1.4, 1.3, 1.5, 1.4, 1.7, 1.4, 1.5, 1.4, 1.5, 1.5, 1.…
$ Petal.Width  &lt;dbl&gt; 0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.3, 0.2, 0.2, 0.1, 0.2, 0.…
$ Species      &lt;fct&gt; setosa, setosa, setosa, setosa, setosa, setosa, setosa, s…</code></pre>
</div>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<ul>
<li>Have a <code>tidyverse</code> look at the data with <code>slice_head( )</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="toy-illustration" class="level4">
<h4 class="anchored" data-anchor-id="toy-illustration">toy illustration</h4>
<ul>
<li>Make a scatterplot, boxplot, and histogram</li>
</ul>
<div class="columns small">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>iris,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>Petal.Width,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">x=</span>Petal.Length,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">col=</span>Species)) <span class="sc">+</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>With the iris data
<ul>
<li>link dimensions y anx x to <code>Petal</code> columns<br>
</li>
<li>link color to column <code>Species</code></li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>p1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_scatter_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>iris,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>Sepal.Length,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">x=</span>Species,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">col=</span>Species)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>x-axis is now <code>Species</code><br>
</li>
<li>Boxplots show a distribution of values for each <code>Species</code></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>p2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_box_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>iris,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Width)) <span class="sc">+</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>x-axis is now Sepal.Width<br>
</li>
<li>A histogram shows the full distribution</li>
<li>A warning highlights default use of <code>bin</code>
<ul>
<li>Check <code>bins=10</code></li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>p3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_hist_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><code>ggsave( )</code> saves the last made plot</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">'plotname.png'</span>,<span class="at">width=</span><span class="dv">12</span>,<span class="at">height=</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="layered-building-blocks" class="level2">
<h2 class="anchored" data-anchor-id="layered-building-blocks">Layered building blocks</h2>
<ul>
<li><code>ggplot</code> philosophy: -gg- Grammar of Graphics (Leland Wilkinson)
<ul>
<li>build visualization like making a sentence
<ul>
<li>specify building blocks independently</li>
<li>combine blocks to create graphical display</li>
</ul></li>
<li>example of layered building blocks:
<ul>
<li><code>ggplot(</code> <code>data=iris,</code><br>
<code>aes(y=Petal.Width,x=Petal.Length,col=Species)</code> <code>) +</code> <code>geom_point() +</code> <code>geom_smooth()</code></li>
</ul></li>
</ul></li>
<li><code>ggplot( )</code> creates a <code>ggplot</code> object
<ul>
<li>data argument to assign the data frame (or tibble)</li>
<li><code>aes( )</code> function to assign variables from the data frame to scales (x-axis, y-axis, color)</li>
</ul></li>
<li><code>geom_point( )</code> to add a scatterplot
<ul>
<li>note: scatterplots require an x and y-axis</li>
<li>note: x and y-axis are linked to variables in the data</li>
</ul></li>
<li><code>geom_smooth( )</code> to add smooted averages
<ul>
<li>note: smoothed averages require an x and y-axis</li>
<li>note: x and y-axis are linked to variables in the data</li>
</ul></li>
<li>General structure includes functions and arguments
<ul>
<li>functions
<ul>
<li><code>ggplot( )</code> initialize the ggplot object</li>
<li><code>geom_*( )</code> visualize geometric objects</li>
<li><code>stat_*( )</code> visualize statistical objects
<ul>
<li>largely equivalent to <code>geom</code></li>
</ul></li>
<li><code>facet_*( )</code> conditional visualization</li>
<li><code>theme( )</code>, <code>guides( )</code>, <code>scale_*( )</code>, <code>coord_*( )</code></li>
</ul></li>
<li>arguments in <code>ggplot( )</code>, <code>geom_*( )</code> and <code>stat_*( )</code>
<ul>
<li><code>data</code> specify data (=input)</li>
<li><code>aes( )</code> specify aesthetic mapping
<ul>
<li>bridging gap input and output</li>
</ul></li>
<li><code>...</code></li>
</ul></li>
</ul></li>
<li>Grammar of Graphics sparked further developments
<ul>
<li>other packages with -gg- philosophy: <code>ggforce</code>, <code>ggalt</code>, <code>ggpubr</code>, <code>ggraph</code>, <code>tidygraph</code>, <code>GGally</code>, <code>ggcorrplot</code>, <code>ggridges</code>, <code>...</code>.</li>
</ul></li>
</ul>
</section>
<section id="dimensionality" class="level2">
<h2 class="anchored" data-anchor-id="dimensionality">Dimensionality</h2>
<ul>
<li><p>Think of variables to show as dimensions</p>
<ul>
<li>combine those variables that show your story</li>
</ul></li>
<li><p><code>aes( )</code> links a variable to a dimension</p>
<ul>
<li>x: categorical or continuous x-axis</li>
<li>y: categorical or continuous y-axis</li>
<li>color:
<ul>
<li>categorical: set of colors</li>
<li>continuous: shades of colors within range</li>
</ul></li>
<li>shape: categorical (limited number)</li>
<li>linewidth: categorical or continuous (dedicated to lines)</li>
<li>linetype: categorical (dedicated to lines)</li>
<li>…</li>
</ul></li>
<li><p>Combinations of variables can be linked to one dimension</p></li>
<li><p>Facets: categorical (panels)</p>
<ul>
<li>a panel for each (combination of) value(s)</li>
</ul></li>
<li><p>Rethink your visualization if this is not sufficient</p>
<ul>
<li>use dimensions aimed at bringing focus</li>
</ul></li>
</ul>
</section>
<section id="visualization-essentials" class="level2">
<h2 class="anchored" data-anchor-id="visualization-essentials">Visualization essentials</h2>
<ul>
<li>part 1: how to make a visualization</li>
<li>part 2: how to further refine</li>
</ul>
<section id="step-by-step-example" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-example">step by step example</h3>
<!-- 1 show constructor -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>The <code>ggplot</code> object is constructed
<ul>
<li>data is linked to the <code>mtcars</code> data</li>
<li>x and y aesthetic are linked to it’s variables <code>mpg</code> and <code>disp</code></li>
<li>does not visualize !</li>
</ul></li>
<li>The internal representation does exist
<ul>
<li>ready to extend for visualization</li>
<li>aesthetics x and y are given their default values
<ul>
<li><code>mpg</code> and <code>disp</code> from <code>mtcars</code></li>
</ul></li>
<li>includes a legend and scale for both x and y axis</li>
</ul></li>
<li>Any geometric function (object) that at least uses an x and y axis can be added as a layer</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>mtcars, </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_scatter_prep_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Add a layer with the <code>+</code> sign
<ul>
<li>a layer often is geometric function<br>
</li>
<li>a geometric function visualizes a <code>gglot</code> object</li>
</ul></li>
<li><code>geom_point( )</code>: create a scatterplot
<ul>
<li>geometric function without arguments</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 2 show visualization with geom_point -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li><code>geom_point()</code> requires data, an x and a y-axis
<ul>
<li>if not specified, inherit from <code>ggplot( )</code></li>
<li>if specified, ignore <code>ggplot( )</code></li>
</ul></li>
<li>example
<ul>
<li>data is not specified inside, but inherited from <code>ggplot( )</code>
<ul>
<li>data is linked to <code>mtcars</code></li>
</ul></li>
<li>x is not specified inside, but inherited from <code>ggplot( )</code>
<ul>
<li>x linked to variable <code>disp</code></li>
</ul></li>
<li>y is specified inside within <code>aes( )</code>
<ul>
<li>y linked to variable <code>mpg</code></li>
</ul></li>
</ul></li>
<li>get help using <code>?</code>, <code>?geom_point</code></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>disp)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>mpg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_overwrite_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 1/2 test visualization with geom_point -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>For this example:
<ul>
<li>specify the dimensions in the constructor</li>
<li>add the data when creating the scatterplot</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">data=</span>mtcars,<span class="fu">aes</span>(<span class="at">x=</span>disp,<span class="at">y=</span>mpg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 3 show color numerical -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Non-essential aesthetics like color can be included
<ul>
<li>specify color dependent on data within the <code>aes( )</code>
<ul>
<li>color extracted from variable <code>gear</code></li>
</ul></li>
<li>note: color is a third dimension</li>
</ul></li>
<li>Note: the numerical (continuous) variable gear is assigned a continuous scale of colors
<ul>
<li>a legend for continuous variables is by default included</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">color=</span>gear)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_color_point_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 4 show color categorical -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>The type of variable determines how it is visualized</li>
<li>A categorical version of the same variable is visualized differently
<ul>
<li>the numerical variable is turned into a categorical one (<code>factor()</code>)</li>
<li>a set of colors is used</li>
<li>a categorical legend is included</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="fu">factor</span>(gear))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_factor_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 3/4 test shape -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Instead of color, use shape
<ul>
<li>not every dimension is equally clear</li>
<li>shapes require categorical data</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">shape=</span><span class="fu">factor</span>(gear))</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_color_point_fct_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 5 show overwrite -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Default behavior can be overwritten
<ul>
<li>the categorical color variable (geometric function) is used</li>
<li>the numerical color variable (constructor) is not considered anymore</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,<span class="at">color=</span>gear)) <span class="sc">+</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">color=</span><span class="fu">factor</span>(gear))</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<!-- 5 test overwrite -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Turn the color into shape, but keep the continuously colored scale as well</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,<span class="at">color=</span>gear)) <span class="sc">+</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">shape=</span><span class="fu">factor</span>(gear))</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 6 show hard coding constants -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Dimensions can also be linked to constants (not variables in the data)</li>
<li>Assign a dimension outside the <code>aes( )</code> function
<ul>
<li><code>aes( )</code> only serves to link dimensions to variables in the data</li>
<li>color is assigned a value, independent of the data</li>
<li>color from the <code>ggplot( )</code> is overwritten</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,<span class="at">color=</span>gear)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">'#FF6600'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_direct_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 7 show multiple aesthetics -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Multiple aesthetics (dimensions) can be specified, in and outside the <code>aes( )</code></li>
<li>With color dependent on gear
<ul>
<li><code>color</code> dependent on a variable is defined inside of <code>aes( )</code></li>
<li><code>alpha</code> (transparency) is set to .3 (30%), outside of <code>aes( )</code>
<ul>
<li>alpha as a percentage (avoid this, it gives unwanted behavior)</li>
<li>alpha related to variables with values between 0 and 1</li>
</ul></li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color=</span><span class="fu">factor</span>(gear))</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    ,<span class="at">alpha=</span>.<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_multiple1_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Note: with alpha (transparency) inside of <code>aes( )</code> at .3 (30%)
<ul>
<li><code>aes( )</code> should not be used to link to constants</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color=</span><span class="fu">factor</span>(gear),<span class="at">alpha=</span>.<span class="dv">3</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_multiple2_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Use alpha inside of <code>aes( )</code> to link it to a variable
<ul>
<li>alpha related to variables with values between 0 and 1</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color=</span><span class="fu">factor</span>(gear),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha=</span>qsec<span class="sc">/</span><span class="fu">max</span>(qsec)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_multiple3_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 8 show multiple aesthetics -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Multiple geometric functions can be included, layered
<ul>
<li><code>geom_point( )</code> creates the dots, a scatterplot</li>
<li><code>geom_line( )</code> connects them over the x-axis</li>
</ul></li>
<li>Note: using the assignment <code>&lt;-</code> code can be build stepwise</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)) <span class="sc">+</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>myplot <span class="ot">&lt;-</span> myplot <span class="sc">+</span> <span class="fu">geom_line</span>()</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>myplot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)) <span class="sc">+</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_line_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)) <span class="sc">+</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_linepoint_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 9 show multiple aesthetics 2 -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Use <code>geom_path( )</code> to connect subsequent observations<br>
</li>
<li>Note: re-ordering has an effect (<code>arrange( )</code>)</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_path</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_path_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(drat), </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_path</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_path_order_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 8/9 test multiple aesthetics -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Add a line over the x-axis, on top of the path</li>
<li>Make the line orange (#FF6600) to highlight it compared to the path</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(drat), </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_path</span>() <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"#FF6600"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 10 show multiple aesthetics color -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>The type of variables in <code>aes( )</code> determines how it is visualized</li>
<li>Note, assigning a categorical variable to color groups data (lines/path)</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="fu">factor</span>(gear))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_path</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_color1_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Note, changing the variable linked to color changes the grouping</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="fu">factor</span>(cyl))</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_path</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_color2_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Specifications in <code>ggplot( )</code> offer default behavior</li>
<li>Specifications inside the <code>geom_*( )</code> overwrite defaults
<ul>
<li>note that the <code>geom_point( )</code> uses the locally specified color aesthetic</li>
<li>note that the <code>geom_line( )</code> uses the default black (size made smaller than default)</li>
</ul></li>
<li>Beware: types (discrete/continuous) should agree when overwriting <code>ggplot(aes( ))</code></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color=</span><span class="fu">factor</span>(gear))</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_line</span>(<span class="at">linewidth=</span>.<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_color_linewidth_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- 11 show multiple aesthetics color -->
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Geometric functions that add statistics can be included as well
<ul>
<li><code>geom_smooth( )</code> offers averaging and standard errors
<ul>
<li>local averages are default (loess lines)</li>
<li>global conditional averages (method=‘lm’)</li>
</ul></li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,<span class="at">color=</span><span class="fu">factor</span>(gear)))</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_multiple_stat_smooth_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_multiple_stat_lm_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Grouping through aesthetics works like before
<ul>
<li>the <code>group</code> argument overwrites grouping by other aesthetics like color</li>
<li>group=1 groups all observations together</li>
</ul></li>
<li>Note: get help <code>?geom_smooth</code> for more details</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">color=</span><span class="fu">factor</span>(gear),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">group=</span><span class="dv">1</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>,<span class="at">color=</span><span class="st">"#FF6600"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/data_example_geom_multiple_stat_lm_1_show_run-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<!-- RECAP -->
</section>
<section id="recap-ggplot" class="level3">
<h3 class="anchored" data-anchor-id="recap-ggplot">recap ggplot( )</h3>
<ul>
<li>Function to create a <code>ggplot</code> object, ready for visualization.
<ul>
<li>constructor, always required</li>
<li>prepares appropriate internal representation</li>
<li>can include default data</li>
<li>can include default aesthetics</li>
</ul></li>
</ul>
</section>
<section id="recap-aes" class="level3">
<h3 class="anchored" data-anchor-id="recap-aes">recap aes( )</h3>
<ul>
<li>Function to link variables (data) to an aesthetic (dimension)
<ul>
<li>used within <code>ggplot( )</code> or <code>geom_*( )</code></li>
<li>requires variables (part of data)</li>
<li>defines dimensions dependent on variable values
<ul>
<li>x and y axes: positions on the axes</li>
<li>color: color</li>
<li>…</li>
</ul></li>
<li>possible arguments depent on <code>geom_*( )</code> if defined
<ul>
<li>shape: symbols in <code>geom_point( )</code></li>
<li>size: size of bullets in <code>geom_point( )</code></li>
<li>linewidth: width of lines in <code>geom_line( )</code></li>
<li>… check the respective help-files</li>
</ul></li>
<li>group argument used inside <code>aes( )</code> to identify groups of observations
<ul>
<li>allows grouping without assigning an aesthetic</li>
<li>use the value <code>1</code> to combine all observations into one group</li>
</ul></li>
<li>automatically assigns a default legend
<ul>
<li>relates to aesthetic</li>
<li>depends on variable type (nominal, ordinal, continuous)</li>
</ul></li>
<li>note: aesthetics defined outside of <code>aes( )</code> are independent of the data</li>
</ul></li>
</ul>
</section>
<section id="recap-geom_" class="level3">
<h3 class="anchored" data-anchor-id="recap-geom_">recap geom_*( )</h3>
<ul>
<li>Function to turn an internal <code>ggplot</code> representation into a visualization
<ul>
<li>different geoms to create different visualizations</li>
<li>different geoms use
<ul>
<li>required aesthetics
<ul>
<li>scatterplots require x and y axis</li>
<li>histogram requires x axis</li>
</ul></li>
<li>optional aesthetics (eg., color)</li>
</ul></li>
<li>geom-specific arguments overwrite those inherited from <code>ggplot( )</code>
<ul>
<li>can include <code>aes( )</code></li>
<li>can include data argument</li>
<li>useful to add or change aesthetics</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="visualization-extras" class="level2">
<h2 class="anchored" data-anchor-id="visualization-extras">Visualization extras</h2>
<ul>
<li>In addition to the basics, there is much more
<ul>
<li>stat layers</li>
<li>scales layers</li>
<li>facet layer</li>
<li>theme layer</li>
<li>coord layer</li>
</ul></li>
</ul>
<section id="geom-and-stat-layers" class="level3">
<h3 class="anchored" data-anchor-id="geom-and-stat-layers">geom and stat layers</h3>
<ul>
<li>Geometric functions and statistical transformation
<ul>
<li>each add layers</li>
<li>geom_* and stat_* are largely equivalent</li>
</ul></li>
</ul>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>A <code>geom_*( )</code> has a default stat argument
<ul>
<li><code>geom_smooth(stat="smooth")</code></li>
</ul></li>
<li>A <code>stat_*( )</code> has a default geom argument
<ul>
<li><code>stat_smooth(geom="smooth")</code></li>
</ul></li>
<li>Same result
<ul>
<li><code>+ geom_point(stat='summary',fun.y='mean',shape=13,size=16)</code></li>
<li><code>+ stat_summary(geom='point',fun.y='mean',shape=13,size=16)</code></li>
</ul></li>
<li>In most cases stick to <code>geom_*( )</code>, occasionally not possible: eg., <code>stat_ecdf( )</code>
<ul>
<li>specific <code>stat_*()</code> function highly dedicated</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span><span class="fu">factor</span>(carb),</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="fu">factor</span>(gear))</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">stat_summary</span>(<span class="at">geom=</span><span class="st">'point'</span>,<span class="at">fun.y=</span><span class="st">'mean'</span>,<span class="at">shape=</span><span class="dv">13</span>,<span class="at">size=</span><span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `fun.y` argument of `stat_summary()` is deprecated as of ggplot2 3.3.0.
ℹ Please use the `fun` argument instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/plot_example_geom_stat_summary_show_run-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(mpg)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">stat_ecdf</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color=</span><span class="fu">factor</span>(cyl)),</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"step"</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/plot_example_geom_stat_ecdf_show_run-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</div>
</div>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>A layer is a function with arguments
<ul>
<li>data (see before)</li>
<li>mapping (aesthetic), defined by the <code>aes( )</code> (see before)</li>
<li>geom (eg., point or smooth)</li>
<li>stat (eg., identity or smooth)</li>
<li>position (eg., identity)</li>
</ul></li>
<li>Position adjustment with position argument
<ul>
<li>identity, typically the default</li>
<li>jitter convenient for points and lines (random perturbation)</li>
<li>stack, fill and dodge convenient for bars (on top or next to)</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>disp,</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">factor</span>(gear))</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="dv">200</span>, </span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width=</span><span class="dv">50</span>),</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha=</span>.<span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/plot_example_geom_position_show_run-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="dv">200</span>, </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_stack</span>(),</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha=</span>.<span class="dv">8</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col=</span><span class="st">'black'</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">'none'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/plot_example_geom_stack_show_run-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>drat,<span class="at">color=</span>carb)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_jitter</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/plot_example_geom_jitter_show_run-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</div>
</div>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Generated variables are predefined transformations
<ul>
<li>start and end with <code>..</code></li>
<li>exist for some <code>geom_*( )</code> and <code>stat_*( )</code></li>
<li>example: a histogram uses a <code>..density..</code> to avoid counts</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_histogram</span>(</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>..density..),</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">binwidth=</span><span class="dv">200</span>, </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_stack</span>(),</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha=</span>.<span class="dv">8</span>,<span class="at">col=</span><span class="st">'black'</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">'none'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0.
ℹ Please use `after_stat(density)` instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/plot_example_geom_density_show_run-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</div>
</div>
</section>
<section id="scale__" class="level3">
<h3 class="anchored" data-anchor-id="scale__">scale_*_*( )</h3>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Each dimension (aesthetic) has a scale
<ul>
<li>serves as a legend</li>
<li>helps with interpretation</li>
</ul></li>
<li>Refer to scale with aesthetic and type
<ul>
<li>structure: scale_<aesthetic>_<type></type></aesthetic></li>
<li>examples:
<ul>
<li>scale_x_continuous to assign continuous scale to x-axis aesthetic</li>
<li>scale_x_sqrt to square root transform the x-axis aesthetic</li>
<li>scale_color_brewer to assign brewer colors to the discrete color aesthetic</li>
<li>scale_color_distiller to assign brewer colors to the continuous color aesthetic</li>
<li>scale_fill_gradient to assign colors to the fill aesthetic</li>
<li>scale_fill_manual to manually assign colors to the fill aesthetic</li>
</ul></li>
<li>arguments control titles, breaks, labels, limits, … see the help file</li>
<li>note: guide argument requires either a name or <code>guides()</code> function for additional control</li>
</ul></li>
<li>Scale types have impact on the visualization and legend (continuous vs.&nbsp;categorical)</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>disp,<span class="at">fill=</span><span class="fu">factor</span>(gear))</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_histogram</span>(</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>..density..),</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">binwidth=</span><span class="dv">200</span>, </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_stack</span>(),</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha=</span>.<span class="dv">8</span>,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">col=</span><span class="st">'black'</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">'none'</span>) <span class="sc">+</span> </span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_fill_brewer</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/plot_example_geom_hist_density_show_run-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>cyl,</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span>drat)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_color_distiller</span>(<span class="at">palette=</span><span class="st">'Oranges'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/plot_example_geom_distiller_show_run-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</div>
</div>
</section>
<section id="facet_" class="level3">
<h3 class="anchored" data-anchor-id="facet_">facet_*( )</h3>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Visualizations can be split for subgroups, facilitating conditional comparisons
<ul>
<li>facets can be useful to keep plots simple</li>
<li>by default, the axes are kept constant for comparison, changeable</li>
<li><code>facet_grid( )</code> uses a grid, <code>facet_wrap( )</code> keeps filling space</li>
</ul></li>
<li>Requires a row and/or column specification
<ul>
<li>separate rows and columns by <code>~</code>, use <code>.</code> if none</li>
<li>use <code>+</code> to combine multiple row and/or column specification</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>drat,<span class="at">color=</span>carb)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>() <span class="sc">+</span> </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">facet_grid</span>(vs<span class="sc">~</span>gear)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>drat,<span class="at">color=</span>carb)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>() <span class="sc">+</span> </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu">facet_grid</span>(.<span class="sc">~</span>vs<span class="sc">+</span>cyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
</section>
<section id="theme" class="level3">
<h3 class="anchored" data-anchor-id="theme">theme( )</h3>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Themes offer control, unrelated to data
<ul>
<li>themes are layers to (re-)specify theme elements</li>
<li>elements are numerous (<code>?theme</code>):
<ul>
<li>line, rect, text, title</li>
<li>axis: axis.title, axis.text.x.top, axis.ticks.x.bottom, …</li>
<li>legend: legend.spacing.y, legend.key.width, legend.justification, …</li>
<li>panel: panel.background, panel.grid.major, panel.ontop, …</li>
<li>plot: plot.background, plot.caption, plot.tag, plot.margin, …</li>
<li>strip: strip.background, strip.text, strip.switch.pad.wrap, …</li>
</ul></li>
<li>elements are controlled with a theme function, eg., <code>element_text( )</code>
<ul>
<li><code>element_text( )</code>, <code>element_line( )</code>, <code>element_rect( )</code>, <code>margin( )</code>, …</li>
</ul></li>
<li>default themes exist, eg., <code>theme_minimal( )</code>, new can be created</li>
<li><code>labs( )</code> is a simpler way to specify titles and labels</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(myplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(wt, mpg)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Fuel economy declines as weight increases"</span>,</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="st">'miles per gallon'</span>)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>The size of the plot title is changed with the <code>element_text( )</code>, the background with the <code>element_rect( )</code></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fu">rel</span>(<span class="fl">1.5</span>)), </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background=</span><span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">"#FF6600"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>The inside of the plot is the panel, modifiable too.
<ul>
<li>multiple elements can be specified in one theme</li>
<li>multiple themes can be specified by layers</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>(myplot <span class="ot">&lt;-</span> myplot <span class="sc">+</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">'#FF6600'</span>,<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(<span class="at">panel.background =</span> </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#003399"</span>, </span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"#FF6600"</span>)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_rect</span>(</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">linetype =</span> <span class="st">"dashed"</span>, </span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="cn">NA</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"#FF6600"</span>)</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>On the outside are the axes and titles, modifiable too
<ul>
<li>the text, ticks and titles are adjusted for color and size</li>
<li>function <code>element_text( )</code>, <code>element_line( )</code> and <code>unit( )</code> are used</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(myplot <span class="ot">&lt;-</span> myplot <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"#FF6600"</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"#003399"</span>, </span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">size=</span><span class="dv">12</span>)</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.ticks.y =</span> </span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">element_line</span>(<span class="at">size =</span> <span class="dv">5</span>)</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.title.y =</span> </span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.5</span>))</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `size` argument of `element_line()` is deprecated as of ggplot2 3.4.0.
ℹ Please use the `linewidth` argument instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.ticks.length.y =</span> <span class="fu">unit</span>(.<span class="dv">25</span>, <span class="st">"cm"</span>),</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.ticks.length.x =</span> <span class="fu">unit</span>(<span class="sc">-</span>.<span class="dv">25</span>, <span class="st">"cm"</span>),</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> .<span class="dv">3</span>, <span class="at">unit =</span> <span class="st">"cm"</span>)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Scales are represented by legends, modifiable too
<ul>
<li>labs can be used to change multiple legend titles</li>
<li>legends can be positioned and formatted</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">colour =</span> <span class="fu">factor</span>(cyl), </span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">shape =</span> <span class="fu">factor</span>(vs))</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Weight (1000 lbs)"</span>,</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Fuel economy (mpg)"</span>,</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"Cylinders"</span>,</span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">shape =</span> <span class="st">"Transmission"</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">'none'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="st">"right"</span>,</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">95</span>, .<span class="dv">95</span>),</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>),</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.box.just =</span> <span class="st">"right"</span>,</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Keys inside legends are modifiable too
<ul>
<li>labs can be used to change multiple legend titles</li>
<li>legends can be positioned and formatted, for key, text and title</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">"#bbbbbb"</span>, </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"#003399"</span>)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.text =</span> <span class="fu">element_text</span>(</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">14</span>, </span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"#003399"</span>)</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Themes also work on facets, at which strips are defined</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(wt, mpg)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> cyl)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">strip.background =</span> </span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>, </span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"white"</span>)</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">strip.text.x =</span> </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">"white"</span>, </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.spacing =</span> </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"lines"</span>)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
</section>
<section id="coord_" class="level3">
<h3 class="anchored" data-anchor-id="coord_">coord_*( )</h3>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Typically the default cartesian coordinate system is used, <code>coord_cartesian( )</code></li>
<li>Limits of the axes are best specified within the <code>coord_*( )</code> function
<ul>
<li>works like a zoom</li>
<li>alternatively, use <code>xlim( )</code> and <code>ylim( )</code>
<ul>
<li>beware that values outside the boundary are treated as missing</li>
</ul></li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>gear,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="fu">factor</span>(vs),</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">group=</span>vs)</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>) <span class="sc">+</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fl">2.5</span>,<span class="fl">4.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>) <span class="sc">+</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlim</span>(<span class="fl">2.5</span>,<span class="fl">4.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 5 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Within the cartesian family alternatives exist
<ul>
<li><code>coord_flip( )</code> switches x and y-axis</li>
<li><code>coord_fixed( )</code> sets the ratio for x and y values
<ul>
<li>eg., .1 means 1 unit on x is 10 on y</li>
</ul></li>
</ul></li>
<li>Alternatives exist, eg., <code>coord_polar( )</code>, <code>coord_trans( )</code>, and various map related functions</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>) <span class="sc">+</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>) <span class="sc">+</span> </span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_fixed</span>(.<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>) <span class="sc">+</span> </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_polar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary">summary</h3>
<ul>
<li><code>ggplot</code> creates a ggplot object, required for visualization</li>
<li><code>aes( )</code> combines aesthetics and link data to scales, and group them</li>
<li><code>geom_*( )</code> are geom functions that visualize a ggplot object</li>
<li><code>stat_*( )</code> are stat functions that also visualize a ggplot object</li>
<li><code>scale_*_*( )</code> helps fine-tuning visualized dimensions</li>
<li><code>facet_grid( )</code> or <code>facet_wrap( )</code> split dimensions over panels (faceting)</li>
<li><code>coords( )</code> re-specify the coordinate system, and helps zooming in</li>
<li><code>theme( )</code> re-specifies data independent characteristics</li>
</ul>
</section>
</section>
<section id="examples-to-go-into-detail" class="level2">
<h2 class="anchored" data-anchor-id="examples-to-go-into-detail">Examples to go into detail</h2>
<ul>
<li>Through various examples, the cheat sheet is focused upon.
<ul>
<li>https://rstudio.com/resources/cheatsheets/</li>
</ul></li>
</ul>
<section id="one-variable" class="level3">
<h3 class="anchored" data-anchor-id="one-variable">one-variable</h3>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Various visualizations address one particular variable
<ul>
<li>mostly continuous but possibly also discrete</li>
<li>continuous variables are typically ‘binned’</li>
</ul></li>
<li>Note the frequency polygon, and the histogram.</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,<span class="fu">aes</span>(mpg)) <span class="sc">+</span> </span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_freqpoly</span>(<span class="at">binwidth=</span><span class="fl">2.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,<span class="fu">aes</span>(mpg)) <span class="sc">+</span> </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="fl">2.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Using the <code>geom_area( )</code>, binning must be explicit as stat argument.</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,<span class="fu">aes</span>(mpg)) <span class="sc">+</span> </span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>(<span class="at">stat=</span><span class="st">'bin'</span>,<span class="at">binwidth=</span><span class="fl">2.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Continuous variables can also be shown continuously, without binning</p></li>
<li><p>Different types of densities are shown</p></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,<span class="fu">aes</span>(mpg)) <span class="sc">+</span> <span class="fu">geom_density</span>() <span class="sc">+</span> </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">kernel=</span><span class="st">'triangular'</span>,<span class="at">color=</span><span class="st">"#003399"</span>) <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">kernel=</span><span class="st">'optcosine'</span>,<span class="at">color=</span><span class="st">"#FF6600"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>The <code>geom_qq( )</code> requires a sample argument (instead of x)
<ul>
<li>positions are determined by their value</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">sample=</span>mpg)) <span class="sc">+</span> </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_qq</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>The bar-plot with <code>geom_bar( )</code> is similar to the histogram
<ul>
<li>shows the actual values instead of a count per bin</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="fu">factor</span>(cyl))) <span class="sc">+</span> </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">fill=</span><span class="st">'#FF6600'</span>,<span class="at">color=</span><span class="st">'#003399'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
<section id="exercises-on-one-variable-visualizations" class="level4">
<h4 class="anchored" data-anchor-id="exercises-on-one-variable-visualizations">exercises on one variable visualizations</h4>
<ul>
<li>Make use of the <code>mpg</code> dataset again<br>
</li>
<li>Make a histogram for the continuously scaled <code>displ</code> variable</li>
</ul>
<div class="cell">
<details>
<summary>an R solution</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">x=</span>displ)) <span class="sc">+</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Adjust the binwidth to .5</li>
<li>Have a glimpse at the data, what data-types are included ?</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">x=</span>displ)) <span class="sc">+</span> </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span>.<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Add a frequency polynomial on top (freqpoly)</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">x=</span>displ)) <span class="sc">+</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span>.<span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_freqpoly</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Notice what happens if the same binwidth is used for the frequency polynomial.</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">x=</span>displ)) <span class="sc">+</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span>.<span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_freqpoly</span>(<span class="at">binwidth=</span>.<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Make a barplot for the discretely scaled <code>class</code> variable</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">x=</span>class)) <span class="sc">+</span> </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Group the data by filling in colors dependent on the <code>drv</code> variable</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">x=</span>class)) <span class="sc">+</span> </span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill=</span>drv))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Turn the bars next to one-another<br>
</li>
<li>Reduce their width to .5 to increase space between bars</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">x=</span>class)) <span class="sc">+</span> </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill=</span>drv),</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">position=</span><span class="st">'dodge'</span>,<span class="at">width=</span>.<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="two-variables" class="level3">
<h3 class="anchored" data-anchor-id="two-variables">two-variables</h3>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Various visualizations address the relation between two variables, whether discrete and/or continuous.</li>
<li>Especially for categorical data data could obscure other data.
<ul>
<li>deal with this using the position argument or with the <code>geom_jitter( )</code></li>
<li>avoid combining both <code>geom_point( )</code> and <code>geom_jitter( )</code> as it would draw points each time</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,<span class="fu">aes</span>(cyl,gear)) <span class="sc">+</span> </span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,<span class="fu">aes</span>(cyl,gear)) <span class="sc">+</span> </span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>(<span class="at">width=</span>.<span class="dv">2</span>,<span class="at">height=</span>.<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-80-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,<span class="fu">aes</span>(cyl,gear)) <span class="sc">+</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">'#FF6600'</span>) <span class="sc">+</span> </span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>(<span class="at">width=</span>.<span class="dv">2</span>,<span class="at">height=</span>.<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><p>The smooth function has been shown above</p></li>
<li><p>The confidence band with the middle 50% (quantiles .25 and .75) is used</p></li>
<li><p>A rug at the axes captures the one dimensional distribution.</p></li>
<li><p>Instead of bullet indicators, the row names (or any other set of labels) can be used</p>
<ul>
<li>use the label argument (within the <code>aes( )</code> when related to data)</li>
<li>some jitter reduces overlap</li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>disp,<span class="at">color=</span><span class="fu">factor</span>(gear))) <span class="sc">+</span> </span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>,<span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rug</span>() <span class="sc">+</span> </span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_quantile</span>(<span class="at">quantiles=</span><span class="fu">c</span>(.<span class="dv">25</span>,.<span class="dv">75</span>),<span class="at">linetype=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
Smoothing formula not specified. Using: y ~ x
Smoothing formula not specified. Using: y ~ x
Smoothing formula not specified. Using: y ~ x</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-82-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span> </span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_text</span>(</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label=</span>(<span class="fu">rownames</span>(mtcars))),</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="dv">2</span>,</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">position=</span><span class="fu">position_jitter</span>(<span class="at">width =</span> .<span class="dv">2</span>,<span class="at">height=</span><span class="dv">3</span>, <span class="at">seed=</span><span class="dv">256</span>)</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-83-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,<span class="fu">aes</span>(cyl,gear)) <span class="sc">+</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">'#FF6600'</span>) <span class="sc">+</span> </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>(<span class="at">width=</span>.<span class="dv">2</span>,<span class="at">height=</span>.<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-84-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Bars can be obtained with <code>geom_col( )</code>, or with <code>geom_bar(stat='identity')</code>
<ul>
<li>use of ‘identity’ causes the height to depend on the numbers in the data</li>
<li>Note: these numbers are summed if not unique, be careful.</li>
</ul></li>
<li>A <code>count( )</code> extracts the frequency of the specified grouping</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>(freq_by_group <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(gear,vs) <span class="sc">%&gt;%</span> <span class="fu">count</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
# Groups:   gear, vs [6]
   gear    vs     n
  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
1     3     0    12
2     3     1     3
3     4     0     2
4     4     1    10
5     5     0     4
6     5     1     1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(freq_by_group, </span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill=</span><span class="fu">factor</span>(vs), <span class="at">y=</span>n, <span class="at">x=</span>gear)) <span class="sc">+</span> </span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"stack"</span>, <span class="at">stat=</span><span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(freq_by_group, </span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill=</span><span class="fu">factor</span>(vs), <span class="at">y=</span>n, <span class="at">x=</span>gear)) <span class="sc">+</span> </span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>(<span class="at">position=</span><span class="st">"dodge"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-86-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, </span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill=</span><span class="fu">factor</span>(vs), <span class="at">y=</span>mpg, <span class="at">x=</span>gear)) <span class="sc">+</span> </span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>(<span class="at">position=</span><span class="st">"dodge"</span>) <span class="sc">+</span> </span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">y=</span><span class="st">'sums all mpg values'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>A boxplot nicely summarizes continuous data, possibly for different groups</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span><span class="fu">factor</span>(cyl))) <span class="sc">+</span> </span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-88-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span><span class="fu">factor</span>(cyl))) <span class="sc">+</span> </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width=</span>.<span class="dv">25</span>,<span class="at">alpha=</span>.<span class="dv">2</span>,</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">fill=</span><span class="fu">factor</span>(cyl))</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">width=</span>.<span class="dv">05</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
<section id="exercises-on-two-variable-visualizations" class="level4">
<h4 class="anchored" data-anchor-id="exercises-on-two-variable-visualizations">exercises on two variable visualizations</h4>
<ul>
<li>Make a scatterplot for the continuously scaled <code>hwy</code> on <code>cty</code>, and color by <code>cyl</code></li>
</ul>
<div class="cell">
<details>
<summary>an R solution</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span>cty,<span class="at">color=</span>cyl)) <span class="sc">+</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-90-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Jitter the data, so it shows if data points obscure one-another<br>
</li>
<li>Make sure that <code>cyl</code> is categorical</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span>cty,<span class="at">color=</span><span class="fu">factor</span>(cyl))) <span class="sc">+</span> </span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>() <span class="sc">+</span> </span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-91-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Add a conditional average with <code>geom_smooth( )</code>, use the <code>lm</code> method</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span>cty,<span class="at">color=</span>class)) <span class="sc">+</span> </span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">shape=</span><span class="fu">factor</span>(cyl))) <span class="sc">+</span> </span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-92-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Add a shape dependent on <code>class</code>, notice the restriction on the number of shapes</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span>cty)) <span class="sc">+</span> </span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">shape=</span><span class="fu">factor</span>(cyl))</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>,<span class="fu">aes</span>(<span class="at">color=</span>class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Switch the color and shapes around (color can have more than 6 if it is really necessary)</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span>cty)) <span class="sc">+</span> </span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">shape=</span><span class="fu">factor</span>(cyl))) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>,<span class="fu">aes</span>(<span class="at">color=</span>class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-94-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Make sure the symbols do not differ by color (all black), only shape, but keep the regression lines</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span>cty)) <span class="sc">+</span> </span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">shape=</span><span class="fu">factor</span>(cyl))) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>,<span class="fu">aes</span>(<span class="at">color=</span>class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Show boxplots for the <code>hwy</code> for each <code>cyl</code></li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span><span class="fu">factor</span>(cyl))</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-96-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Add the actual data points and make sure they do not obscure each other</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span><span class="fu">factor</span>(cyl))</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-97-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Give a color to the observations dependent on <code>class</code></li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span><span class="fu">factor</span>(cyl))</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">color=</span>class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-98-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Make a bar chart that adds all <code>hwy</code> values in each <code>class</code> group</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span><span class="fu">factor</span>(class))</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-99-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Use a coloring of the bars to signal the relative contribution of all <code>cyl</code> categories</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span><span class="fu">factor</span>(class),</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">factor</span>(cyl))</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-100-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Flip the coordinates x and y axis</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg,</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span><span class="fu">factor</span>(class),</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">factor</span>(cyl))</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-101-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="intervals" class="level3">
<h3 class="anchored" data-anchor-id="intervals">intervals</h3>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Specialized functions facilitate visualization of errors / confidence intervals</li>
<li>Standard errors or other intervals can be visualized along with fitted values</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>(tmp <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="sc">~</span>set,<span class="sc">~</span>fit,<span class="sc">~</span>se,</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>,<span class="dv">3</span>,.<span class="dv">2</span>,</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>,<span class="dv">2</span>,.<span class="dv">3</span>,</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>,<span class="dv">2</span>,.<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
    set   fit    se
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1     3   0.2
2     2     2   0.3
3     3     2   0.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>(myplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>tmp,</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>fit,<span class="at">x=</span>set)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-102-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_errorbar</span>(</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymax=</span>fit<span class="sc">+</span><span class="dv">2</span><span class="sc">*</span>se,<span class="at">ymin=</span>fit<span class="dv">-2</span><span class="sc">*</span>se)</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-103-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_errorbarh</span>(</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xmax=</span>fit<span class="sc">+</span><span class="dv">2</span><span class="sc">*</span>se,<span class="at">xmin=</span>fit<span class="dv">-2</span><span class="sc">*</span>se)</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-104-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_crossbar</span>(</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymax=</span>fit<span class="sc">+</span><span class="dv">2</span><span class="sc">*</span>se,<span class="at">ymin=</span>fit<span class="dv">-2</span><span class="sc">*</span>se)</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-105-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>myplot <span class="sc">+</span> <span class="fu">geom_pointrange</span>(</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymax=</span>fit<span class="sc">+</span><span class="dv">2</span><span class="sc">*</span>se,<span class="at">ymin=</span>fit<span class="dv">-2</span><span class="sc">*</span>se)</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-106-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
</section>
<section id="third-variable-implied" class="level3">
<h3 class="anchored" data-anchor-id="third-variable-implied">third variable implied</h3>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>Frequencies and densities can be obtained for two variables</li>
<li>With <code>geom_bin2d( )</code> the frequency of combinations is obtained
<ul>
<li>in this case for the factors cyl and gear</li>
</ul></li>
<li>Continuous variables can be used with binning</li>
<li>Contours can be obtained with <code>geom_density2d( )</code></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span><span class="fu">factor</span>(cyl),<span class="at">x=</span><span class="fu">factor</span>(gear))</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_bin2d</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-107-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars,</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>carb)</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="fu">geom_density2d</span>(</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">colour =</span> <span class="fu">factor</span>(gear))</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-108-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
</section>
<section id="three-variables" class="level3">
<h3 class="anchored" data-anchor-id="three-variables">three variables</h3>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li>A z dimension is possible, while typically other aesthetics are used</li>
<li>A heatmap is the most obvious use
<ul>
<li>to show for example correlations between many variables with colors instead of values</li>
<li>a small example is used instead
<ul>
<li>notice the argument for tile is a fill</li>
<li>z is the argument for the contour</li>
</ul></li>
</ul></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">set1=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="at">set2=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>); </span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>); </span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>tmp<span class="sc">$</span>score <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">100</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  set1 set2     score
1    1    1 0.2875775
2    2    1 0.7883051
3    3    1 0.4089769
4    4    1 0.8830174
5    5    1 0.9404673
6    6    1 0.0455565</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>tmp,</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>set2,<span class="at">x=</span>set1)</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill=</span>score))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-110-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>tmp,</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>set2,<span class="at">x=</span>set1)</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_contour</span>(<span class="fu">aes</span>(<span class="at">z=</span>score))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-111-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
</section>
<section id="primitives" class="level3">
<h3 class="anchored" data-anchor-id="primitives">primitives</h3>
<ul>
<li>Primitives are the basic building blocks
<ul>
<li>several primitives exist: point( ), path( ), polygon( ), segment( ), ribbon( ), rect( ), text( ), blank( )</li>
<li>only <code>geom_point( )</code> is used very often</li>
<li><code>geom_ribbon( )</code> can be interesting for showing intervals</li>
<li>typically useful for fine-tuning only</li>
</ul></li>
</ul>
<div class="columns small">
<div class="column" style="width:50%;">
<ul>
<li><p>The <code>polygon( )</code> is used, with coordinates created in a separate datafile.</p></li>
<li><p>The same is done with <code>tiles( )</code></p></li>
<li><p>It is possible to create the datafile within the function.</p></li>
<li><p>First a blank plot is drawn, then the rest is added.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>blank_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars,</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y=</span>mpg,<span class="at">x=</span>cyl)) <span class="sc">+</span> </span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_blank</span>()</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>polygon_coordinate_file <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a><span class="sc">~</span>x,<span class="sc">~</span>y,</span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>,<span class="dv">17</span>,</span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>,<span class="dv">10</span>,</span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>,<span class="dv">10</span>,</span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>,<span class="dv">21</span>)</span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a>tile_coordinate_file <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a><span class="sc">~</span>x,<span class="sc">~</span>y,<span class="sc">~</span>w,</span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>,<span class="dv">20</span>,<span class="dv">2</span>,</span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>,<span class="dv">30</span>,<span class="dv">5</span>,</span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>,<span class="dv">15</span>,<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>(updated_plot <span class="ot">&lt;-</span> blank_plot <span class="sc">+</span> </span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">data=</span>polygon_coordinate_file,</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y),<span class="at">alpha=</span>.<span class="dv">3</span>,<span class="at">color=</span><span class="st">"#FF6600"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-113-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>(updated_plot <span class="ot">&lt;-</span> updated_plot <span class="sc">+</span> </span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">data=</span>tile_coordinate_file,</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y,<span class="at">width=</span><span class="dv">2</span>),<span class="at">alpha=</span>.<span class="dv">3</span>,</span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">color=</span><span class="st">"#003399"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-114-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>updated_plot <span class="sc">+</span> <span class="fu">geom_segment</span>(<span class="at">data=</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">x=</span><span class="dv">5</span>,<span class="at">y=</span><span class="dv">15</span>,<span class="at">xend=</span><span class="dv">7</span>,<span class="at">yend=</span><span class="dv">20</span>),</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y,<span class="at">xend=</span>xend,<span class="at">yend=</span>yend),</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="dv">5</span>,<span class="at">color=</span><span class="st">"#FF6600"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-115-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</div>
</div>
<section id="exercises-on-primitives" class="level4">
<h4 class="anchored" data-anchor-id="exercises-on-primitives">exercises on primitives</h4>
<ul>
<li>The <code>mpg</code> dataset is part of tidyverse’s ggplot !</li>
</ul>
<div class="cell">
<details>
<summary>an R solution</summary>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Have a glimpse at the data, what data-types are included ?</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre class="exercise-output"><code>Rows: 234
Columns: 11
$ manufacturer &lt;chr&gt; "audi", "audi", "audi", "audi", "audi", "audi", "audi", "…
$ model        &lt;chr&gt; "a4", "a4", "a4", "a4", "a4", "a4", "a4", "a4 quattro", "…
$ displ        &lt;dbl&gt; 1.8, 1.8, 2.0, 2.0, 2.8, 2.8, 3.1, 1.8, 1.8, 2.0, 2.0, 2.…
$ year         &lt;int&gt; 1999, 1999, 2008, 2008, 1999, 1999, 2008, 1999, 1999, 200…
$ cyl          &lt;int&gt; 4, 4, 4, 4, 6, 6, 6, 4, 4, 4, 4, 6, 6, 6, 6, 6, 6, 8, 8, …
$ trans        &lt;chr&gt; "auto(l5)", "manual(m5)", "manual(m6)", "auto(av)", "auto…
$ drv          &lt;chr&gt; "f", "f", "f", "f", "f", "f", "f", "4", "4", "4", "4", "4…
$ cty          &lt;int&gt; 18, 21, 20, 21, 16, 18, 18, 18, 16, 20, 19, 15, 17, 17, 1…
$ hwy          &lt;int&gt; 29, 29, 31, 30, 26, 26, 27, 26, 25, 28, 27, 25, 25, 25, 2…
$ fl           &lt;chr&gt; "p", "p", "p", "p", "p", "p", "p", "p", "p", "p", "p", "p…
$ class        &lt;chr&gt; "compact", "compact", "compact", "compact", "compact", "c…</code></pre>
</div>
</div>
<ul>
<li>Make a scatterplot for <code>cty</code> per <code>hwy</code>, and assign it to the object name ‘current’</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>current <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>mpg,<span class="fu">aes</span>(<span class="at">y=</span>hwy,<span class="at">x=</span>cty)) <span class="sc">+</span> <span class="fu">geom_point</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Draw 2 rectangles with <code>geom_rect( )</code>,
<ul>
<li>one with corners 10,15 and 20,25,<br>
</li>
<li>one shifted with 5 both dimensions,<br>
</li>
<li>using 2 additional data frames (tibbles) to store the coordinates.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tmp &lt;- data.frame(</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># c1=c(10,15),</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># c2=c(15,20),</span></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># c3=c(25,30),</span></span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># c4=c(35,40))</span></span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a>my_2_sets_of_coordinates <span class="ot">&lt;-</span> <span class="fu">tribble</span>(<span class="sc">~</span>xi,<span class="sc">~</span>yi,<span class="sc">~</span>xa,<span class="sc">~</span>ya,</span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">25</span>,<span class="dv">35</span>,</span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">40</span></span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Plot the coordinates on top of the scatterplot<br>
</li>
<li>Note: the argument inherit.aes=FALSE avoids inheriting aesthetics</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>current <span class="sc">+</span> <span class="fu">geom_rect</span>(<span class="at">data=</span>my_2_sets_of_coordinates,</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xmin=</span>xi,<span class="at">ymin=</span>yi,<span class="at">xmax=</span>xa,<span class="at">ymax=</span>ya),</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes=</span><span class="cn">FALSE</span>,<span class="at">alpha=</span>.<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-120-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Add a different color to each separately, use ‘#FF6600’ and ‘#003399’</li>
</ul>
<div class="cell">
<details>
<summary>a tidyverse solution</summary>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>current <span class="sc">+</span> </span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rect</span>(<span class="at">data=</span>my_2_sets_of_coordinates[<span class="dv">1</span>,],</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">xmin=</span>xi,<span class="at">ymin=</span>yi,<span class="at">xmax=</span>xa,<span class="at">ymax=</span>ya),</span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">inherit.aes=</span><span class="cn">FALSE</span>,<span class="at">alpha=</span>.<span class="dv">3</span>,</span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill=</span><span class="st">"#003399"</span>) <span class="sc">+</span> </span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rect</span>(<span class="at">data=</span>my_2_sets_of_coordinates[<span class="dv">2</span>,],</span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">xmin=</span>xi,<span class="at">ymin=</span>yi,<span class="at">xmax=</span>xa,<span class="at">ymax=</span>ya),</span>
<span id="cb148-8"><a href="#cb148-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">inherit.aes=</span><span class="cn">FALSE</span>,<span class="at">alpha=</span>.<span class="dv">3</span>,</span>
<span id="cb148-9"><a href="#cb148-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill=</span><span class="st">"#FF6600"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-121-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="beyond-ggplot2--gg--packages" class="level2">
<h2 class="anchored" data-anchor-id="beyond-ggplot2--gg--packages">Beyond ggplot2: -gg- packages</h2>
<ul>
<li>Various extensions have been developed, each showing the same basic structure but typically addressing particular types of visualizations</li>
<li>Check https://exts.ggplot2.tidyverse.org/gallery/</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)  </span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">scale</span>(mtcars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Scale for y is already present.
Adding another scale for y, which will replace the existing scale.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-122-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggforce)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Sepal.Length, Sepal.Width)) <span class="sc">+</span> </span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_voronoi_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Species, <span class="at">group =</span> <span class="sc">-</span>1L)) <span class="sc">+</span> </span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_voronoi_segment</span>() <span class="sc">+</span></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `stat_voronoi_tile()` is dropping duplicated points</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `stat_voronoi_segment()` is dropping duplicated points</code></pre>
</div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-123-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(gdpPercap, lifeExp, <span class="at">size =</span> pop, <span class="at">colour =</span> country)) <span class="sc">+</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> country_colors) <span class="sc">+</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>continent) <span class="sc">+</span></span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Year: {frame_time}'</span>, <span class="at">x =</span> <span class="st">'GDP per capita'</span>, <span class="at">y =</span> <span class="st">'life expectancy'</span>) <span class="sc">+</span></span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(year) <span class="sc">+</span></span>
<span id="cb154-11"><a href="#cb154-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">'linear'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="visualization_files/figure-html/unnamed-chunk-124-1.gif" class="img-fluid"></p>
</div>
</div>
</section>
<section id="last-remarks" class="level2">
<h2 class="anchored" data-anchor-id="last-remarks">Last remarks</h2>
<p>Current page provides a primer on visualization, which is a key tool for understanding data and statistics required within the process of data analyses.</p>
<p>Get ahead at https://ggplot2-book.org/</p>
<p>It is strongly advised to play with the techniques discussed above to get some proficiency in using it, as it would add significantly to the flexibility of whatever you want to further do with your data.</p>
<p><img src="_img/tidyverseloop.png" class="img-fluid" style="width:80.0%"></p>
<p>Other tidyverse package exist, and within the same framework many more are being developed. The consistency within the tidyverse ecosystem should give you a push though, to study the other packages yourself when of interest.</p>
<p>Base R still is a proper alternative to the tidyverse ecosystem, so be aware that others may do things differently.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>